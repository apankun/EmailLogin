{"remainingRequest":"E:\\StockForecast\\Guesssssss\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\StockForecast\\Guesssssss\\src\\components\\favorite.vue?vue&type=style&index=0&id=5469a1fc&scoped=true&lang=css&","dependencies":[{"path":"E:\\StockForecast\\Guesssssss\\src\\components\\favorite.vue","mtime":1559735945745},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.center{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n",{"version":3,"sources":["favorite.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;AACA;AACA;AACA","file":"favorite.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"center\">\r\n        <!-- 将获取到的数据进行计算 -->\r\n        <el-table :data=\"tableData.slice((currentPage-1)*PageSize,currentPage*PageSize)\"\r\n                  style=\"width: 100%\"\r\n                  highlight-current-row\r\n                  @current-change=\"handleCurrentChange\">\r\n\r\n           <el-table-column prop=\"stockId\" label=\"股票代码\" ></el-table-column>\r\n            <el-table-column prop=\"stockName\" label=\"股票名称\" ></el-table-column>\r\n        </el-table>\r\n        <div class=\"tabListPage\">\r\n            <el-pagination @size-change=\"handleSizeChange\"\r\n                           @current-change=\"handlesCurrentChange\"\r\n                           :current-page=\"currentPage\"\r\n                           :page-sizes=\"pageSizes\"\r\n                           :page-size=\"PageSize\" layout=\"total, prev, pager, next, jumper\"\r\n                           :total=\"totalCount\">\r\n            </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data(){\r\n            return {\r\n                // 总数据\r\n                tableData:[],\r\n                // 默认显示第几页\r\n                currentPage:1,\r\n                // 总条数，根据接口获取数据长度(注意：这里不能为空)\r\n                totalCount:1,\r\n                // 个数选择器（可修改）\r\n                //pageSizes:[1,2,3,4],\r\n                // 默认每页显示的条数（可修改）\r\n                PageSize:5,\r\n            }\r\n        },\r\n        methods:{\r\n            getUserStock(){\r\n                this.$api.stock.stockFavorite({\r\n                    email:sessionStorage.getItem(\"username\")\r\n                }).then(({data})=>{\r\n                    if(data.status=='0'){\r\n                        var jsonObj=JSON.parse(data.content);\r\n                        this.totalCount=jsonObj.length\r\n                        for (var i = 0; i < jsonObj.length; i++) {\r\n                            var record = jsonObj[i];\r\n                            var stockId = record['stockId'];\r\n                            var stockName = record['stockName'];\r\n                            this.tableData.push({\r\n                                stockId: stockId,\r\n                                stockName: stockName,\r\n                            });\r\n                        }\r\n\r\n                    }else {\r\n                        this.$message.error(data.message);\r\n                    }\r\n                })\r\n            },\r\n\r\n            // 分页\r\n            // 每页显示的条数\r\n            handleSizeChange(val) {\r\n                // 改变每页显示的条数\r\n                this.PageSize=val\r\n                // 注意：在改变每页显示的条数时，要将页码显示到第一页\r\n                this.currentPage=1\r\n            },\r\n            // 显示第几页\r\n            handlesCurrentChange(val) {\r\n                // 改变默认的页数\r\n                this.currentPage=val\r\n            },\r\n\r\n            handleCurrentChange(val) {\r\n               // this.$alert(val.stockId);\r\n                this.$api.stockPredict.getByStockId({//post请求发送到searchStock\r\n                    stockId:val.stockId,\r\n                    // stock:md5.update(this.ruleForm.stock).digest(\"hex\"),\r\n                    // stock:this.$getCode(this.ruleForm.stock),\r\n                   // pickdate:this.chooseday\r\n                }).then((res)=>{\r\n                    console.log(res)\r\n                    this.load=false\r\n                    if(res.data.status=='0'){\r\n                        let stock=JSON.parse(res.data.content);\r\n                        // this.$alert(res.data.content);\r\n                        this.$message.success(\"搜索成功\");\r\n                        let stockId=stock.stockId;\r\n                        let stockName=stock.stockName;\r\n                        let isUp=stock.isUp;\r\n                        let isUpStop=stock.isUpStop;\r\n                        let stockMarket=stock.stockMarket;\r\n                        // let stockForecast=stock.stockForecast;\r\n                        let percentage=stock.percentage;\r\n                        //this.$router.go(0);\r\n                        this.$router.push({ name:'showstock',query: { stockId: stockId,stockName:stockName,stockMarket:stockMarket,isUp:isUp,isUpStop:isUpStop,percentage:percentage }});\r\n\r\n                    }else {\r\n                        this.$message.error(res.data.message);\r\n                    }\r\n\r\n                })\r\n            }\r\n        },\r\n        created:function(){\r\n            this.getUserStock()\r\n        },\r\n        watch: {\r\n            '$route' (to, from) {//监听路由变化，防止参数刷新而页面不刷新的情况。\r\n                this.$router.go(0);\r\n                //this.handleCurrentChange(this.val)\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.center{\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n</style>\r\n"]}]}