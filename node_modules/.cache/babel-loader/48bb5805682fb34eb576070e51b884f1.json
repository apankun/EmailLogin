{"remainingRequest":"E:\\StockForecast\\Guesssssss\\node_modules\\babel-loader\\lib\\index.js!E:\\StockForecast\\Guesssssss\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\StockForecast\\Guesssssss\\src\\router.js","dependencies":[{"path":"E:\\StockForecast\\Guesssssss\\src\\router.js","mtime":1560172517946},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\StockForecast\\Guesssssss\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import Vue from 'vue';\nimport Router from 'vue-router';\nimport Login from './views/login';\nimport Register from './views/register';\nimport Index from './views/index';\nimport showstock from './views/showstock';\nimport Wrong from './views/wrong';\nVue.use(Router);\nvar router = new Router({\n  mode: 'history',\n  //mode:'hash',\n  base: process.env.BASE_URL,\n  //平时在localhost自测使用\n  //base:'/guess/',//打包build到tomcat上时使用\n  routes: [{\n    path: '/login',\n    name: 'login',\n    component: Login,\n    meta: {\n      title: 'Login'\n    }\n  }, {\n    path: '/register',\n    name: 'register',\n    component: Register,\n    meta: {\n      title: 'Register'\n    }\n  }, {\n    path: '/',\n    name: 'index',\n    component: Index,\n\n    /*     meta: {\r\n             requireAuth: true\r\n         }*/\n    meta: {\n      title: 'Guess!'\n    }\n  }, {\n    path: '/showstock',\n    name: 'showstock',\n    component: showstock,\n    meta: {\n      title: 'Guess!'\n    }\n  }, {\n    path: '*',\n    name: 'wrong',\n    component: Wrong,\n    meta: {\n      title: 'Guess!'\n    }\n  }]\n}); // 验证 token，存在才跳转\n\nrouter.beforeEach(function (to, from, next) {\n  var token = localStorage.getItem('token');\n\n  if (to.meta.title) {\n    document.title = to.meta.title;\n  }\n\n  next();\n\n  if (to.meta.requireAuth) {\n    if (token) {\n      next();\n    } else {\n      next({\n        path: '/login',\n        query: {\n          redirect: to.fullPath\n        }\n      });\n    }\n  } else {\n    next();\n  }\n});\nexport default router;",{"version":3,"sources":["E:\\StockForecast\\Guesssssss\\src\\router.js"],"names":["Vue","Router","Login","Register","Index","showstock","Wrong","use","router","mode","base","process","env","BASE_URL","routes","path","name","component","meta","title","beforeEach","to","from","next","token","localStorage","getItem","document","requireAuth","query","redirect","fullPath"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,QAAP,MAAqB,kBAArB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAOC,KAAP,MAAkB,eAAlB;AAEAN,GAAG,CAACO,GAAJ,CAAQN,MAAR;AAEA,IAAMO,MAAM,GAAG,IAAIP,MAAJ,CAAW;AACtBQ,EAAAA,IAAI,EAAE,SADgB;AAEtB;AACAC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAHI;AAGK;AAC3B;AACAC,EAAAA,MAAM,EAAE,CAAC;AACDC,IAAAA,IAAI,EAAE,QADL;AAEDC,IAAAA,IAAI,EAAE,OAFL;AAGDC,IAAAA,SAAS,EAAEf,KAHV;AAILgB,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAJD,GAAD,EASJ;AACIJ,IAAAA,IAAI,EAAE,WADV;AAEIC,IAAAA,IAAI,EAAE,UAFV;AAGIC,IAAAA,SAAS,EAAEd,QAHf;AAIIe,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAJV,GATI,EAkBJ;AACIJ,IAAAA,IAAI,EAAE,GADV;AAEIC,IAAAA,IAAI,EAAE,OAFV;AAGIC,IAAAA,SAAS,EAAEb,KAHf;;AAID;;;AAGKc,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAPV,GAlBI,EA8BJ;AACIJ,IAAAA,IAAI,EAAC,YADT;AAEIC,IAAAA,IAAI,EAAC,WAFT;AAGIC,IAAAA,SAAS,EAACZ,SAHd;AAIIa,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAJV,GA9BI,EAyCJ;AACIJ,IAAAA,IAAI,EAAE,GADV;AAEIC,IAAAA,IAAI,EAAE,OAFV;AAGIC,IAAAA,SAAS,EAAEX,KAHf;AAIIY,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE;AADL;AAJV,GAzCI;AALc,CAAX,CAAf,C,CA0DA;;AACAX,MAAM,CAACY,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAClC,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIL,EAAE,CAACH,IAAH,CAAQC,KAAZ,EAAmB;AACfQ,IAAAA,QAAQ,CAACR,KAAT,GAAiBE,EAAE,CAACH,IAAH,CAAQC,KAAzB;AACH;;AACDI,EAAAA,IAAI;;AACJ,MAAIF,EAAE,CAACH,IAAH,CAAQU,WAAZ,EAAyB;AACrB,QAAIJ,KAAJ,EAAW;AACPD,MAAAA,IAAI;AACP,KAFD,MAEO;AACHA,MAAAA,IAAI,CAAC;AACDR,QAAAA,IAAI,EAAE,QADL;AAEDc,QAAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAET,EAAE,CAACU;AAAf;AAFN,OAAD,CAAJ;AAIH;AACJ,GATD,MASO;AACHR,IAAAA,IAAI;AACP;AACJ,CAlBD;AAoBA,eAAef,MAAf","sourcesContent":["import Vue from 'vue'\r\nimport Router from 'vue-router'\r\nimport Login from './views/login'\r\nimport Register from './views/register'\r\nimport Index from './views/index'\r\nimport showstock from './views/showstock'\r\nimport Wrong from './views/wrong'\r\n\r\nVue.use(Router)\r\n\r\nconst router = new Router({\r\n    mode: 'history',\r\n    //mode:'hash',\r\n    base: process.env.BASE_URL,//平时在localhost自测使用\r\n    //base:'/guess/',//打包build到tomcat上时使用\r\n    routes: [{\r\n            path: '/login',\r\n            name: 'login',\r\n            component: Login,\r\n        meta: {\r\n            title: 'Login'\r\n        }\r\n\r\n    },\r\n        {\r\n            path: '/register',\r\n            name: 'register',\r\n            component: Register,\r\n            meta: {\r\n                title: 'Register'\r\n            }\r\n\r\n        },\r\n        {\r\n            path: '/',\r\n            name: 'index',\r\n            component: Index,\r\n       /*     meta: {\r\n                requireAuth: true\r\n            }*/\r\n            meta: {\r\n                title: 'Guess!'\r\n            }\r\n\r\n        },\r\n        {\r\n            path:'/showstock',\r\n            name:'showstock',\r\n            component:showstock,\r\n            meta: {\r\n                title: 'Guess!'\r\n            }\r\n\r\n\r\n        },\r\n\r\n        {\r\n            path: '*',\r\n            name: 'wrong',\r\n            component: Wrong,\r\n            meta: {\r\n                title: 'Guess!'\r\n            }\r\n\r\n        }\r\n    ]\r\n})\r\n\r\n// 验证 token，存在才跳转\r\nrouter.beforeEach((to, from, next) => {\r\n    let token = localStorage.getItem('token')\r\n    if (to.meta.title) {\r\n        document.title = to.meta.title;\r\n    }\r\n    next();\r\n    if (to.meta.requireAuth) {\r\n        if (token) {\r\n            next()\r\n        } else {\r\n            next({\r\n                path: '/login',\r\n                query: { redirect: to.fullPath }\r\n            })\r\n        }\r\n    } else {\r\n        next()\r\n    }\r\n})\r\n\r\nexport default router\r\n"]}]}